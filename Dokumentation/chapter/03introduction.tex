%03introduction.tex

\chapter{Management summary}
\section{Ausgangslage}
Je nach Untergrund, Bodeneigenschaften, Gel\"ande sowie Klima gedeihen unterschiedliche Typen von W\"aldern. Diese Typen werden Waldstandorte genannt. Aktuell werden Karten, die im Auftrag des Kantons von Experten angefertigt wurden, nur in grossen Intervallen revidiert oder sind nicht \"offentlich zug\"anglich.
Einer der Gr\"unde daf\"ur sind u.a. die hohen Kosten, die eine Analyse im Feld mit sich bringt.
Zudem ist die Erfassung und Nachf\"uhrung gepr\"agt von analogen Vorg\"angen, da die vorhandenen
technischen Ger\"ate und Programme f\"ur den Einsatz im Feld ungeeignet sind.
Daher muss von Hand Niedergeschriebenes im B\"uro digitalisiert werden, bevor es an den
Arbeitgeber geschickt werden und sp\"ater auf kantonal isolierten Plattformen publiziert werden kann.
\section{Ziel der Arbeit}
Die Erfassung und Publikation von Waldstandorten sollte vereinfacht und beschleunigt werden. Dabei
sollen digitale Technologien eingesetzt werden wie Smartphone, GPS und Internet. Diese neuen
Instrumente sollen entsprechend geschulten Nutzern die Erfassung von Waldstandorten sowie \"offentliche und private Informationen in Form von Fl\"achen und Punkten erm\"oglichen. Auf einer Karte wird mittels GPS die eigene
Position ermittelt. Umliegende, bereits erfasste Waldstandorte, \"offentliche Fl\"achen anderer
User und die eigenen privaten Fl\"achen werden angezeigt. Diese Fl\"achen k\"onnen ebenfalls
Wandstandorte beschreiben oder zus\"atzliche Informationen \"uber den
Standort beinhalten, z.B. eine speziell gekennzeichnete Beobachtungsfl\"ache.

\section{Ergebnisse}
Nach einer Evaluation eines Prototyps, erstellt mithilfe eines kommerziellen Produkts (vgl. Abbildung 2),
und der Erstellung von Mockups, wurde ein eigenes Webapp “Waldmeister Outdoors” als Prototyp
realisiert. Durch die Webapplikation kann die Arbeit der Experten
erleichtert werden. Da die Waldstandort-Karte gleichzeitig im Web synchronisiert
ist, wird dar\"uber hinaus der Informationsaustausch unter allen Beteiligten erleichtert.
\section{Ausblick}
Grosse Teile der Schweiz sind noch unkartiert, und viele Waldstandorte k\"onnten sich unter dem Einfluss der Klimaerw\"armung ver\"andern. Die kontinuierliche Beobachtung solcher Standorte ist Forschungsgegenstand und die Arbeit im Feld ist unerl\"asslich. "Waldmeister Outdoors" kann im Berufsalltag sowie bei der Kommunikation mit Institutionen den Arbeitsfluss beschleunigen. Weitere Features wie die Verwendung von Plus Codes und offline-F\"ahigkeiten welche bei Verbindungsproblemen zum Einsatz kommen, bzw Benutzerfl\"achen automatisch synchronisieren sobald eine Verbindung besteht. Des weiteren bietet es sich an, dass sich User in Gruppen einklinken k\"onnen um unter sich Benutzerfl\"achen zu teilen und zu besprechen, bevor sie ver\"offentlicht werden. Ebenfalls sollten erstellte Fl\"achen von registrierten Benutzern und deren Gruppen ver\"andert und gel\"oscht werden k\"onnen, nachdem sie Erstellt wurden.

\chapter{Motivation und Ausgangslage}
\section{Ein mobiles App f\"ur Feldforschung im Wald}
Aufbauend auf der existierenden "Waldmeister" App, welches von Studenten und Professoren als Nachschlagewerk f\"ur Waldstandortbestimmungen in der Praxis verwendet wird, existieren viele, teils digitalisierten Karten, welche den Stand der Forschung in sogenannten Vegetationskundlichen Karten beschreiben. Waldstandortbestimmung ist ein sich st\"andig im Wechsel befindendes Thema und auch in der Schweiz k\"onnen sich Standorte oder deren Befund \"uber Jahre \"andern. Vegetationskundliche Karten, welche von Experten im Auftrag des Kantons angefertigt werden, befinden sich in statischen oder ungewarteten Zust\"anden in Archiven des Kantons, oder werden in grossen Intervallen (5-10 Jahre) revidiert. Teilweise sind diese Daten daher gar nich, oder nur oder in sehr veralteten Zustand zug\"anglich.
Dies liegt haupts\"achlich am grossen Kostenaufwand welche eine Analyse im Feld durch Experten mit sich bringt. Der Datenfluss ist gepr\"agt von analogen Vorg\"angen, vorallem da viele technische Ger\"ate nicht f\"ur den Einsatz im Feld geeignet sind und kantonale Organisationen als Mittelsm\"anner etabliert sind, welche die Daten von Experten archivieren und ggf. in digitaler Form ver\"offentlichen. "Waldmeister - Outdoors" zielt darauf hin den Arbeitszyklus der Analyse und Publikation von Waldstandorten zu vereinfachen und zu beschleunigen. Dies soll erreicht werden durch neue technische M\"oglichkeiten und Medien wie dem Smartphone, GPS und Mobiles Internet.\"u
Das Instrument "Waldmeister - Outdoors" soll dazu verwendet werden die Erfassung von Geoinformationsdaten bez\"uglich der Waldstandortbestimmung zu standardisieren und deren \"ubermittlung an die zust\"andige Beh\"orde, Forschern und anderen Experten zu beschleunigen. Anstelle eines Jahrelangen Projekts, einen Bestimmten Standort in Waldstandorte zu kategorisieren, soll ein System entwickelt werden, welches eine inkrementelle digitale Erfassung und Publikation erm\"oglicht, den Arbeitsaufwand der Experten erleichtert und den Informationsaustausch, - und Abgleich beschleunigt.

\section{Use Cases}
\subsection{Zugriff auf Vegetationskundliche Karten}
W\"ahrend der Feldforschung kann es sehr hilfreich sein auf bereits kategorisierte Waldfl\"achen Zugriff zu haben um sich am Standort zu orientieren. Dieses Material ist oft in einem Kantonalen Portal z.B. https://maps.zh.ch erh\"altlich, sind jedoch nur selten kompatibel mit mobilen Ger\"aten, interagieren nicht mit dem GPS des Smartphones oder die Webseiten sind schwer zu navigieren. "Waldmeister-Outdoors" soll einem gezielten Zweck dienen und nicht mit Kartenmaterial \"uberladen werden um den Zugriff auf die Vegetationskundliche Karten zu vereinfachen und die Navigation zu beschleunigen. $\newline

\subsection{Bearbeitung der Vegetationskundlichen Karten}
Kantonale Vegetationskundliche Karten sind statisch (d.h. Read-Only) und k\"onnen von Usern nicht bearbeitet oder erweitert werden. Dies f\"uhrt dazu dass Kartenmaterial in veraltetem Zustand vorliegt und Fehler oder Ver\"anderungen nur mit grossem Aufwand upgedatet werden k\"onnen. Nicht nur f\"uhrt dies zu Problemen bei der Kommunikation mit anderen Experten, Forschern und Studenten, es behindert auch den Arbeitsfluss der Person, welche sich im Feld befindet, da andere Mittel zur tempor\"aren Festhaltung der Ergebnisse verwendet werden m\"ussen, um an einem sp\"ateren Zeitpunkt wieder darauf zugreifen zu k\"onnen (z.B. eine halbj\"ahrliche Untersuchung eines Standorts, ohne die Zwischenergebnisse zu publizieren). Dies geschieht oft analog, auf Papier im Feld und kann zu einem sp\"ateren Zeitpunkt zum pers\"onlichen Gebrauch digitalisiert werden, was zu einem erh\"ohten Arbeitsaufwand f\"uhrt. Durch die Verwendung von "Waldmeister - Outdoors" kann das gleiche Werkzeug ben\"utzt werden um eine Fl\"ache w\"ahrend der Untersuchung sowohl im Feld als auch im B\"uro zu beschreiben, sowie die finalen Befunde am Ende der Untersuchung zu publizieren und zu Teilen.

\subsection{Unterst\"utzung w\"ahrend der Untersuchung}
Feldforschung hat oft mit der Orientierung und der Man\"ovrierung des Standorts an sich zu tun und auch hier kann "Waldmeister - Outdoors" den Arbeitsaufwand simplifizieren und reduzieren. Durch die direkte digitale Erfassung von beliebigen Notizen bez\"uglich dem Standort m\"ussen diese nicht mehr analog erfasst werden und k\"onnen direkt der Position in der realen Welt zugeordnet werden. Ist Beispielsweise ein Gebiet schwer Befahrbar oder zug\"anglich kann dies direkt auf der digitalen Karte erfasst und f\"ur pers\"onliche Zwecke gespeichert werden, k\"onnen aber ebenfalls publiziert werden falls sie f\"ur Andere von Interesse sind. Es kann sich hierbei auch um Pfade oder einzelne Standorte von Indikatoren handeln, bzw. eine genaue Lage der Observationsfl\"ache welche untersucht werden soll.

\subsection{Automatische Bestimmung einer Waldfl\"ache}
Durch den Zugriff auf eine Datenbank, in welcher jede Waldstandort einem Typ zugeordnet ist, kann mithilfe des Mobilen Ger\"ats der Typ des Waldstandorts in welcher sich ein User gerade befindet automatisch bestimmt werden. Dies kann mithilfe des GPS Sensors des Mobilen Ger\"ats und einer Datenbankabfrage zu jedem Zeitpunkt geschehen.

\section{Mobile Limits}
In vielen F\"allen ist eine Standortbestimmung durch GPS im Wald sehr ungenau und die Internetverbindung kann instabil sein. Im Idealfall \"ubertr\"agt das Werkzeug so wenig Daten wie m\"oglich, speichert diese auf dem Ger\"at und wartet auf eine stabile Verbindung um Daten auf den Server zu \"ubertragen. $\newline$
Kartenmaterial sollte wenn m\"oglich permanent auf das Mobile Ger\"at geladen werden k\"onnen, damit Datenvolumen bei der Verwendung im Feld nicht strapaziert werden.

\chapter{Technologies}
\section{Progressive Webapp}
Um das Werkzeug "Waldmeister - Outdoors" nicht auf eine Platform von Mobilen Ger\"aten zu beschr\"anken (iOS oder Android), setzt es auf die Prinzipien der Progressive Webapps (PWA). Diese beschreiben eine Webseite welche viele Merkmale besitzt, welche bisher den nativen Apps vorbehalten waren. Eine PWA ist gewissermassen eine responsive Website, welche auch offline verwendet werden kann und schliesst dadurch eine zus\"atzliche Entwicklung einer nativen App, parallel zur Webseite \"uberfl\"ussig. Eine PWA erreicht diese offline F\"ahigkeiten durch den Einsatz von Service Workern; ein JavaScript welches von Web-Browsern im Hintergrund ausgef\"uhrt wird. Einmal online aufgerufen, k\"onnen die Inhalte beim n\"achsten Besuch der Seite auch dann angezeigt werden, wenn eine schlechte oder sogar gar keine Internetverbindung besteht (Offline-Betrieb). Auch die von nativen Apps bekannten Push-Benachrichtigungen sind mit Service Workern m\"oglich. \cite{ServiceWorkers} $\newline$
Grundlegende Charakteristiken der PWA sind Offline Funktionalit\"at, Push Notifications, Add-To-Homescreen, jedoch ist keine Installation notwendig (beispielsweise \"uber den Apple Appstore oder Google Playstore). Verbreitete Mobile Browser wie Firefox und Google Chrome haben bereits eine vollst\"andige Unterst\"utzung von PWAs, Safari sollte dies bis Ende Februar 2018 ebenfalls implementiert haben und kann daher auch auf iOS verwendet werden. PWAs k\"onnen auf den Home-Screen des mobilen Ger\"ats hinzugef\"ugt werden.

\section{ESRI / ArcGIS online}
Technologien von ESRI und insbesondere ArcGIS online wurden recherchiert um einen funktionierenden Prototypen mit offline-caching zu erstellen. Hintergrundkarten (in Form einen Tile-Layers) k\"onnen auf dem Ger\"at zwischengespeichert werden, und die Erstellung und Synchronisation von editierbaren Vektorlayern funktioniert auch beim offline Betrieb. Vektorlayer k\"onnen Punkte, Pfade oder Fl\"achen beschreiben und k\"onnen offline erstellt werden und werden bei verf\"ugbaren Internetverbindung mit einem Server synchronisiert. Dieses Verhalten kann bei einer PWA durch Service-Worker rekreiert werden.

\section{Vue.JS}
Vue.JS ist ein JavaScript framework welches sich zum Erstellen von Single-Page Webapplikationen eignet. Es wurde im Jahr 2013 erstmals ver\"offentlicht und wurde am 19. Dezember 2017 auf die aktuellsten Version 2.5.13 gepatcht. Vue.JS folgt einer Variation des Model-View-Controller Entwurfmusters genannt dem Model - View - ViewModel Muster. Wie auch das MVC folgt MVVM dient es der Trennung von Darstellung und der Logik der Benutzerschnittstelle. Dies erlaubt dem nutzenden Entwickler, die Struktur der Anwendung nach eigenen Anspr\"uchen zu richten.Entwickler beschreiben es daher als "less opinionated" im Vergleich zu anderen popul\"aren JavaScript Webframeworks wie Anglar.JS und React. Vue.JS kann von Entwicklern eingesetzt werden welche HTML und JavaScript beherrschen und erfordert keine weiteren Webtechnologien. Vue.JS setzt eine Webseite aus Instanzen und Komponenten, bzw Single File Components zusammen. Single File Components sind bei VueJS welche Architekturprobleme von mittel bis grossen Webapps, welche vollst\"andig von JavaScript getrieben werden, zu verbessern versucht. Folgende Probleme tauchen dabei auf:
$\newline$
\begin{enumerate}
\item Global definitions $\newline$
Global definitions force unique names for every component
\item String templates $\newline$
String templates lack syntax highlighting and require ugly slashes for multiline HTML
\item No CSS support $\newline$
No CSS support means that while HTML and JavaScript are modularized into components, CSS is conspicuously left out
\item No build step $\newline$
No build step restricts us to HTML and ES5 JavaScript, rather than preprocessors like Pug (formerly Jade) and Babel
\end{enumerate}
$\newline$
VueJS besagt, dass all diese Probleme von Single File Components (mit .vue extension) dank Werkzeugen wie Webpack und Browserify gel\"ost werden. Eine solche Komponente besteht auf HTML Template, JavaScript und CSS in einer eigenen, abgekapselten Datei. Durch das erzielt VueJS $\newline$

\begin{enumerate}
\item Complete syntax highlighting
\item CommonJS modules
\item und Component-scoped CSS
\end{enumerate}

Wem diese Idee Abkapselung nicht gef\"allt kann weiterhin ein CSS auslagern und in eine Komponente (innerhalb des HTML Templates) importieren: $\newline$
\begin{lstlisting}
<!-- my-component.vue -->
<template>
  <div>This will be pre-compiled</div>
</template>
<script src="./my-component.js"></script>
<style src="./my-component.css"></style>
\end{lstlisting}
$\newline$

\subsection{Separation of Concern}
Das was ist mit Separation of Concern (SoC)? Eine logische Vorgehensweise bei Softwareengineering ist es, ein Computerprogramm in logische Abschnitte einzuteilen und zu separieren. Diese Teile sollten sich um einen Zweck oder Belangen (Concern) k\"ummern. Dies heisst jedoch nicht, dass die verschiedenen Dateitypen unbedingt in separaten Dateien aufgeteilt werden muss. In der modernen User Interface Entwicklung und den Entwicklern von VueJS ist es oft einfacher gefallen verschiedene Komponenten, welche lose gekoppelt sind, zu komponieren, statt sie auf drei riesigen Layern (HTML, JS und CSS) getrennt zu halten,  sie aber in den Komponenten zu verflechten. \cite{VueSFC} $\newline$
Auf diesem Weg sind Komponenten (Template, die Logik und das Styling) sind zusammenh\"angender und auch einfacher zu warten, obwohl dies nicht den Prinzipien von SoC folgt. Traditionelles SoC unterteilt dies in die Gruppen der Zwecke Organisation (HTML), Pr\"asentation (CSS) und Interaktion und Verhalten (JavaScript)


\subsection{Vue-Router}
Der Vue-Router ist das Herzst\"uck einer Single-Page-Applikation (SPA). Der offizielle Vue-Router ist ein Client-seitiger Router welcher mithilfe der HTML5 History API voll funktionsf\"ahiges Client-side routing. $\newline$ In der HTML Definition der Haupkomponente kann <router-view> als Platzhalter verwendet werden um die Komponenten anzuzeigen, welche abh\"angig von der momentanen Route an dieser Stelle angezeigt werden sollen. Ein Wechsel zwischen diesen Routen bewirkt kein Page-Reload, da dies von Vue.JS lediglich innerhalb derselben Page \"anderungen bewirkt und keine tats\"achlichen URL Aufrufe ausf\"uhrt. $\newline$
Der Vue Router wird innerhalb einer Hauptseite, welcher die Grundlage der Webseite darstellt, angezeigt. Methoden von Komponenten k\"onnen bewirken dass sich der Inhalt, welcher an der Stelle des Router-Views angezeigt wird, ver\"andert. Menupunkte im Header (z.B Register, Login, About, Map), bewirken mit .push() dass der Vue-Router mithilfe des index.js files die korrekten Komponenten an dieser Stelle anzeigt. Dies kann auch direkt \"uber eine URL Eingabe /register oder /login erfolgen, ohne dass der Aufruf \"uber eine interne Komponente ausgef\"uhrt werden muss. Die Datei index.js beinhaltet daher alle m\"oglichen Pfade welche von der Webapp aufgel\"ost werden und bestimmt die angezeigten Komponenten welche mit dieser Route verkn\"upft sind. $\newline$
Alternativ k\"onnten die \"ahnlichen L\"osungen von Page.js oder Director als Third-Party Produkte an dieser Stelle integriert  werden, es ist jedoch empfohlen die offizielle Vue-Router Library zu verwenden.

\subsection{VueX}
VueX ist eine offizielle Erweiterung von Vue.JS und fungiert als Statusmanager. VueX arbeitet mit einem Store welcher die Zust\"ande aller Komponenten in einer Vue Applikation \"uber Regeln definiert. VueX besteht aus Actions, Mutations und States, und Aktionen k\"onnen in dieser Reihenfolge eine Auswirkung auf die Vue Komponenten haben. $\newline$
VueX hat Vorteile bei mittel bis grossen Projekten welche auf dem Single-Page-Application Prinzip basieren. VueX bietet auch die M\"oglichkeit einen zentralen Store in kleinere Module aufzuteilen, jedes mit ihrer eigenen State, Mutations, Actions Werten. $\newline$
Da Komponenten in Vue abgekapselt sind, k\"onnen sie standardm\"assig nicht auf Daten zugreifen welche in anderen Komponenten definiert werden. Solche Daten m\"ussen per Store verf\"ugbar gemacht werden damit sie \"uber mehrere Instanzen geteilt werden k\"onnen. $\newline$

\begin{lstlisting}
const sourceOfTruth = {}

const vmA = new Vue({
  data: sourceOfTruth
})

const vmB = new Vue({
  data: sourceOfTruth
})
\end{lstlisting}
$\newline$

Wird nun sourceOfTruth ver\"andert, wird sie in allen Komponenten, in welcher sie verwendet wird automatisch auf den neuen Stand gebracht. Dies kann in gr\"osseren Applikationen schnell un\"ubersichtlich werden, da jede Komponente diese sourceOfTruth ver\"andern kann, ohne eine nachvollziehbare Spur zu hinterlassen. Es wird daher empfohlen das Store Pattern von VueX zu implementieren, welche Ver\"anderungen am Store nur \"uber Mutationen zul\"asst. Somit wird es klarer zu welcher Zeit welche Mutationen aufgerufen werden k\"onnen und wie sie durchgef\"uhrt wurden:$\newline$

\begin{lstlisting}
var store = {
  debug: true,
  state: {
    message: 'Hello!'
  },
  setMessageAction (newValue) {
    if (this.debug) console.log('setMessageAction triggered with', newValue)
    this.state.message = newValue
  },
  clearMessageAction () {
    if (this.debug) console.log('clearMessageAction triggered')
    this.state.message = ''
  }
}
\end{lstlisting}
$\newline$

\begin{figure}[h]
    \centering
    \includegraphics[width=1.25\textwidth]{vuex}
    \caption{Vuex Action-Mutations-State Diagram}
    \label{fig:mesh1}
\end{figure}

Komponenten k\"onnen auch private Zust\"ande haben, dies wird mit "privateState" erreicht. In diesem Fall muss der sharedState ebenfalls definiert werden.

\begin{figure}[h]
    \centering
    \includegraphics[width=1.25\textwidth]{sharedstate}
    \caption{Vuex private}
    \label{fig:mesh2}
\end{figure}

Dies bewirkt dass eine Komponente nicht direkt einen Wert oder Zustand im Store ver\"andern kann, sondern dies \"uber einen Event ausf\"uhrt, welcher den Store selbst informiert welchen State es \"uber eine Mutation zu ver\"andern gilt.


\subsection{Vuetify}
Vuetify ist eine Vue.JS UI Framework welches das Frontend aus vielen, Material-Design basierten UI Bausteinen zusammenbaut.

\section{Axios}
Axios ist eine JavaScript library zur Erstellung von Promise-Based HTTP Requests, welche "Waldmeister-Outdoors" dazu verwendet mit dem Server zu kommunizieren. Axios erm\"oglicht es asynchrone HTTP requests zu REST Endpunkten abzusetzen oder Requests wie Create, Read, Update, Delete (CRUD) Operationen auszuf\"uhren. Axios kann in puren JavaScript Projekten verwendet werden oder auch in Projekten welche auf Vue.JS basieren. Ein Promise-Objekt repr\"asentiert die in der Zukunft geschehende Komplettierung einer asynchronen Operation (oder deren Abbruch durch einen Fehler).

\section{Django}
Als Server zur Verwaltung der User und der Daten welche die User generieren und ben\"otigen kommt Django zum Einsatz. Es ist ein Open-Source Webframework welches das Python Gegenst\"uck zu Ruby-On-Rails darstellt. Im Kern folgt es dem Model-View-Controller Prinzip, obwohl es eigene Namensgebung f\"ur diese Verwendet. Django verwendet eine PostgreSQL Datenbank um Daten persistent zu machen. Django wird ebenfalls dazu verwendet um User einen Account zu geben, damit nur sie Zugriff auf Ihre privaten Fl\"achen haben, bevor sie vom User ver\"offentlich werden.
\subsection{Django Rest Framework}
Da eine SPA haupts\"achlich \"uber API Schnittstellen mit dem Server kommuniziert, wird auf dem Server das Django Rest-Framework (DRF) eingesetzt. Es bietet ein sehr flexibles System zur Erstellung von RESTful Web-APIs. Das DRF bietet die M\"oglichkeiten GET, POST, PUT und DELETE auf eine Resource auszuf\"uhren. "Waldmeister-Outdoors" verwendet die REST Api beispielsweise um usergenerierte Fl\"achen, Pfade oder Punkte in die Datenbank zu speichern oder diese zur Darstellung in der Map aus der Datenbank zu laden. Ebenfalls werden Benutzer welche sich Registrieren mit Username, Password und ggf. Emailadresse in der Datenbank eingetragen. $\newline$

\section{PostgreSQL}
Postgres ist das Datenbank Management System welches mit Django zusammen die Daten persistent macht, welche die User per API in der PWA generieren. Hierzu wird das Django Packet Psycopg2 verwendet. Django kann durch Models ein Datenbankschema beschreiben, welches von PostgreSQL generiert und in einer lokalen PostgreSQL Instanz gespeichert wird.
\subsection{PostGIS}
Um Geoinformationsdaten wie z.B. Polygone und Pfade korrekt zu speichern wird auf der Datenbank das Plugin PostGIS installiert. Dadurch kann Django die ben\"otigten Datenbankmodelle erstellen und per REST Schnittstelle speichern. 


\section{Leaflet}
Leaflet ist eine JavaScript Library welche es erm\"oglicht Map auf dem Client darzustellen. Es fokussiert sich auf Simplizit\"at, Performanz und ist sehr schlank, was einer PWA sehr entgegen kommt. Die Library ist nur 38 KB gross und erm\"oglicht es viele Features welche bei der Darstellung einer Map ben\"otigt wird zu verwenden. 

\subsection{TileLayer}
Der TileLayer fungiert als Hintergrundkarte welche dynamisch geladen wird. Je nach ben\"otigtem Kartenausschnitt werden die Tiles als .pngs geladen und auf der Karte dargestellt. Dies f\"uhrt dazu dass je nach Gr\"osse und Zoomstufe des Kartenausschnitts nur minimalen Datenaufwand bet\"atigt wird. Als Hintergrundkarte werden die "Terrain" Tiles von "stamen-tiles" verwendet.

\subsection{Leaflet editable}
Damit die User neue Polygone, Punkte und Pfade erfassen k\"onnen ben\"otigt Leaflet das Plugin "Leaflet editable", welches es erm\"oglicht neue Objekte direkt auf der Map zu zeichnen, oder bestehende Objekte zu editieren. Sobald ein Objekt abgeschlossen ist, wird es per REST Schnittstelle an die Datenbank \"ubertragen. Der User hat die M\"oglichkeit de Objekt einen Namen als Label zuzuweisen, und es zwischen privat oder public zu wechseln. Jeder User hat nur Zugriff auf seine eigenen privaten Fl\"achen, bzw. Pfade und Punkte, ausser er w\"ahlt es diese zu Ver\"offentlichen, bzw "public" zu machen, damit sie alle User auf der Map sehen.

\chapter{Implementation}

\section{Mockup}
Die Mockups wurden vor der Implementation erstellt um das Screendesign und Layout klarer zu definieren bevor es um die technische Implementation von "Waldmeister - Outdoors" ging. In den Abbildungen 1 bis 9 kann man den Arbeitsschritt Einloggen und Erstellen einer neuen Fl\"ache und eines Points of Interests (POI) sehen. Zus\"atzlich sieht der User seine eigene Location auf der Map eingetragen und hat \"uber das Menu "My Places" Zugriff auf eine Liste seiner erstellten Fl\"achen. Ein Kontextmenu gibt bei der Anzeige eines bestimmten Objekts zus\"atzliche Informationen \"uber dieses.

\begin{figure}[h]
\centering
    \includegraphics[width=0.7\textwidth]{mockup1-1}
    \caption{Mockup Screen 1}
    \label{fig:mesh1}
\end{figure}

\begin{figure}[h]
\centering
    \includegraphics[width=0.7\textwidth]{mockup1-2}
    \caption{Mockup Screen 2}
    \label{fig:mesh2}
\end{figure}

\begin{figure}[h]
\centering
    \includegraphics[width=0.7\textwidth]{mockup1-3}
    \caption{Mockup Screen 3}
    \label{fig:mesh3}
\end{figure}

\begin{figure}[h]
\centering
    \includegraphics[width=0.7\textwidth]{mockup1-4}
    \caption{Mockup Screen 4}
    \label{fig:mesh4}
\end{figure}

\begin{figure}[h]
\centering
    \includegraphics[width=0.7\textwidth]{mockup1-5}
    \caption{Mockup Screen 5}
    \label{fig:mesh5}
\end{figure}

\begin{figure}[h]
\centering
    \includegraphics[width=0.7\textwidth]{mockup1-6}
    \caption{Mockup Screen 6}
    \label{fig:mesh6}
\end{figure}

\begin{figure}[h]
\centering
    \includegraphics[width=0.7\textwidth]{mockup1-7}
    \caption{Mockup Screen 7}
    \label{fig:mesh7}
\end{figure}

\begin{figure}[h]
\centering
    \includegraphics[width=0.7\textwidth]{mockup1-8}
    \caption{Mockup Screen 8}
    \label{fig:mesh8}
\end{figure}

\begin{figure}[h]
\centering
    \includegraphics[width=0.7\textwidth]{mockup1-9}
    \caption{Mockup Screen 9}
    \label{fig:mesh9}
\end{figure}



\section{UMLs}
UML Diagramme geben Auskunft \"uber die Architektur und Abl\"aufe des Systems. Es ist eine grafische Repräsentation in Form von Diagrammen welche in der Sprache nach den Definitionen der "Unified Modeling Language" produziert sind. Sie bestimmt bei der Modellierung Beziehungen und Abhägigkeiten zwischen Begriffen und Notationen für diese Begriffe und statischen Strukturen und dynamischen Abläufen. Sie finden Verwendung und ist die dominierende Sprache für die Softwaresystem-Modellierung und dient zur Kommunikation von Ideen zwischen Projektauftraggeber, Softwareentwickler und Systemingenieuren. In den 90er Jahren wurde die erste Spezifikation unter dem Namen UML 1.x entwickelt und wurde im Jahr 2000 revidiert und wurde in UML2 umbenannt. Seit Februar 2008 liegt Version 2.2 in der finalen Version vor. Seit Juni 2015 wird die aktuellste Version 2.5 verwendet. $\newline$
Hauptsächlich definiert die Sprache Aktionen, Aktivitäten, Allgemeines Verhalten, Anwendungsfälle, Informationsflüsse, Interaktionen, Klassen, Komponenten, Kompositionsstrukturen, Modelle, Profile, Schablonen, Verteilungen und Zustandsautomaten. Diese kommen Strukturdiagrammen und Verhaltensdiagramme zum Einsatz, wie u.a. dem Klassen und Komponentendiagramm, oder Aktivitätsdiagramm, Sequenzdiagramm, Kommunikationsdiagramm, etc... Die Grenzen zwischen den über vierzehn Diagrammtypen verlaufen weniger scharf. UML2 verbietet nicht, dass ein Diagramm grafische Elemente enthält, die eigentlich zu unterschiedlichen Diagrammtypen gehören. Elemente aus einem Strukturdiagramm und aus einem Verhaltensdiagramm können nach Anwendungsfall auf dem gleichen Diagramm dargestellt werden, falls damit eine besonders treffende Aussage zu einem Modell gemacht werden kann. $\newline$


\subsection{Use Case - Diagramm}
Das Diagram \ref{fig:uc1} zeigt auf welche M\"oglichkeiten ein User hat mit dem Werkzeug zu interagieren. Ein User welcher sich nicht registriert kann weder Fl\"achen generieren oder editieren und kann keine privaten Fl\"achen sehen. Er kann jedoch die Vegetationskundliche Karte und \"offentliche Fl\"achen aller anderen User sehen. Nachdem er sich registriert und eingeloggt hat, kann er Fl\"achen erstellen und editieren. Diese teilen sich in öffentliche und private Benutzerflächen auf. Diese Option kann er während der Erfassung der geometrie der Fläche frei wählen. Standardmässig ist eine solche Fläche privat und wird nur durch Wunsch des Users öffentlich gemacht. Eine bereits erstellte Fläche kann aber im Nachhinein auf öffentlich umgeschaltet werden, nachdem sie z.B. die Geometrie und Position vom User finalisiert wurde. Dies ist vorallem nach Absprache zwischen anderen Experten denkbar, welche über Gruppen auch auf private, noch nicht öffentliche Benutzerflächen Zugriff haben um die Eigenschaften und Lage einer Fläche zu analysieren und über diese zu diskutieren.
\begin{figure}[h]
\centering
    \includegraphics[width=0.9\textwidth]{WaldmeisterMap_USECASE}
    \caption{Use Case Diagram}
    \label{fig:uc1}
\end{figure}

\subsection{Klassendiagram, Datenbankdiagramm}
Das Diagramm \ref{fig:cd1}  schildert die Relation und Ausbau der wichtigsten Klassen des Systems. Dies zeigt dass Benutzerflächen nur von registrierten Users erstellt werden können und immer einem solchen Zugewiesen sind. Wird ein Benutzer aus dem System gelöscht, werden alle Flächen welche diesem Account zugeordnet sind aus dem System gelöscht. 

\begin{figure}[h]
\centering
    \includegraphics[width=0.5\textwidth]{ClassDiagram2}
    \caption{Klassendiagramm}
    \label{fig:cd1}
\end{figure}

\subsection{Sequenzdiagramm}

Die folgenden Sequenzdiagramme geben detaillierten Einblick in den Ablauf des Registrierung, - und Loginvorgangs sowie das Laden der Public und Private Areas und deren Darstellung im Client. $\newline$

\begin{figure}[h]
\centering
    \includegraphics[width=0.9\textwidth]{Sequenz_DiagrammRegister}
    \caption{Sequenzdiagramm, Register}
    \label{fig:sd1}
\end{figure}

\begin{figure}[h]
\centering
    \includegraphics[width=0.9\textwidth]{Sequenz_DiagrammLogin}
    \caption{Sequenzdiagramm, Login}
    \label{fig:sd2}
\end{figure}

\begin{figure}[h]
\centering
    \includegraphics[width=0.9\textwidth]{Sequenz_DiagrammPublicAreas}
    \caption{Sequenzdiagramm, Public Areas}
    \label{fig:sd3}
\end{figure}

\begin{figure}[h]
\centering
    \includegraphics[width=0.9\textwidth]{Sequenz_DiagrammMyAreas}
    \caption{Sequenzdiagramm, My Areas}
    \label{fig:sd4}
\end{figure}


\chapter{Results}
Das Projekt wurde mit genannten Technologien umgesetzt und wird auf Github gehostet: $\newline$

https://github.com/dschmide/Waldmeister

$\newline$


\section{Discussion /  Screenshots}

\begin{figure}[h]
\centering
    \includegraphics[width=1.1\textwidth]{ScreenShot}
    \caption{Screenshot Desktop, Vegetationskundliche Karte}
    \label{fig:ss1}
\end{figure}

\begin{figure}[h]
\centering
    \includegraphics[width=1.1\textwidth]{ScreenShot2}
    \caption{Screenshot Desktop, EditArea}
    \label{fig:ss2}
\end{figure}


\chapter{Links}
https://github.com/dschmide/Waldmeister $\newline$
https://maps.zh.ch?topic=WaldVKZH&scale=18634&x=2706590.13&y=1251180.39&srid=2056

\chapter{API Documentation}





